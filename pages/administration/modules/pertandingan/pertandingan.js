let competitions = [];let EVENT_CODE = null;/* =========================================   INIT (DIPANGGIL DARI ADMIN.JS)========================================= */export async function init({ eventCode }) {  EVENT_CODE = eventCode;  if (!EVENT_CODE) {    alert("Event tidak ditemukan.");    return;  }  await loadData();  const btn = document.getElementById("addCompetitionBtn");  if (btn) {    btn.onclick = () => openModal();  }}export function destroy() {}/* =========================================   LOAD DATA========================================= */async function loadData() {  const res = await fetch(`/api/admin/match-number?eventCode=${EVENT_CODE}`);  competitions = await res.json();  renderList();}/* =========================================   SAVE========================================= */async function saveToServer(data) {  if (!data.id) {    data.id = Date.now();  }  await fetch("/api/admin/match-number", {    method: "POST",    headers: { "Content-Type": "application/json" },    body: JSON.stringify({      eventCode: EVENT_CODE,      matchNumber: data    })  });  await loadData();}/* =========================================   DELETE========================================= */async function deleteFromServer(id) {  await fetch("/api/admin/match-number", {    method: "DELETE",    headers: { "Content-Type": "application/json" },    body: JSON.stringify({      eventCode: EVENT_CODE,      id    })  });  await loadData();}/* =========================================   MODAL========================================= */function openModal(editData = null) {  const modal = document.createElement("div");  modal.className = "modal";  modal.innerHTML = `    <div class="modal-box">      <h3>${editData ? "Edit Nomor Pertandingan" : "Tambah Nomor Pertandingan"}</h3>      <label>Nomor Pertandingan</label>      <input type="text" id="nomor">      <label>Kategori</label>      <input type="text" id="kategori">      <label>Gender</label>      <select id="gender">        <option value="Putra">Putra</option>        <option value="Putri">Putri</option>      </select>      <label>Sistem</label>      <select id="sistem">        <option value="Knock Out">Knock Out</option>        <option value="Group/Pool">Group/Pool</option>      </select>      <label>Jumlah Peserta</label>      <input type="number" id="peserta">      <div id="groupBox" style="display:none;">        <label>Jumlah Pool</label>        <input type="number" id="jumlahPool" value="2">      </div>      <div class="modal-actions">        <button id="saveBtn" class="primary">Simpan</button>        <button id="cancelBtn">Batal</button>      </div>    </div>  `;  document.body.appendChild(modal);  const nomor = modal.querySelector("#nomor");  const kategori = modal.querySelector("#kategori");  const gender = modal.querySelector("#gender");  const sistem = modal.querySelector("#sistem");  const peserta = modal.querySelector("#peserta");  const jumlahPool = modal.querySelector("#jumlahPool");  const groupBox = modal.querySelector("#groupBox");  if (editData) {    nomor.value = editData.nomor;    kategori.value = editData.kategori;    gender.value = editData.gender;    sistem.value = editData.sistem;    peserta.value = editData.peserta;    jumlahPool.value = editData.jumlahPool || 2;  }  sistem.onchange = () => {    groupBox.style.display =      sistem.value === "Group/Pool" ? "block" : "none";  };  sistem.onchange();  modal.querySelector("#cancelBtn").onclick = () => modal.remove();  modal.querySelector("#saveBtn").onclick = async () => {    const data = {      id: editData?.id,      nomor: nomor.value,      kategori: kategori.value,      gender: gender.value,      sistem: sistem.value,      peserta: peserta.value,      jumlahPool:        sistem.value === "Group/Pool"          ? jumlahPool.value          : null    };    await saveToServer(data);    modal.remove();  };}/* =========================================   RENDER========================================= */function renderList() {  const putra = document.getElementById("putraList");  const putri = document.getElementById("putriList");  putra.innerHTML = "";  putri.innerHTML = "";  competitions.forEach(c => {    const card = `      <div class="comp-card">        <div>          <strong>${c.nomor} - ${c.kategori}</strong><br>          ${c.sistem} | ${c.peserta} Peserta        </div>        <div class="comp-actions">          <button onclick="window.editComp(${c.id})">Edit</button>          <button onclick="window.drawingComp(${c.id})">Drawing</button>          <button onclick="window.deleteComp(${c.id})">Hapus</button>        </div>      </div>    `;    if (c.gender === "Putra") {      putra.innerHTML += card;    } else {      putri.innerHTML += card;    }  });}/* =========================================   GLOBAL ACTION========================================= */window.editComp = function(id) {  const data = competitions.find(c => c.id === id);  openModal(data);};window.deleteComp = function(id) {  if (confirm("Yakin hapus?")) {    deleteFromServer(id);  }};window.drawingComp = function(id) {  window.location.href =    `/pages/administration/pages/drawing.html?event=${EVENT_CODE}&id=${id}`;};